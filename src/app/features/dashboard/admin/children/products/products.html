<!-- products.component.html -->
<div class="products-page">
  <div class="page-header">
    <div class="header-content">
      <h1 class="page-title">Products</h1>
      <p class="page-subtitle">Manage your product inventory</p>
    </div>
    <button class="btn btn-primary" (click)="openAddForm()">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
      </svg>
      Add Product
    </button>
  </div>

  <!-- Search and Filter Bar -->
  <div class="filter-bar">
    <div class="search-box">
      <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
      </svg>
      <input type="text" placeholder="Search products...">
    </div>
    <div class="filter-actions">
      <button class="btn btn-outline">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"/>
        </svg>
        Filter
      </button>
      <button class="btn btn-outline">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"/>
        </svg>
        Export
      </button>
    </div>
  </div>

  <!-- Products Table -->
  <div class="table-container">
    <table class="data-table">
      <thead>
        <tr>
          <th>
            <input type="checkbox" class="checkbox">
          </th>
          <th>Product</th>
          <th>Image</th>
          <th>Price</th>
          <th>Unit</th>
          <th>Stock</th>
          <th>Status</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let product of products">
          <td>
            <input type="checkbox" class="checkbox">
          </td>
          <td>
            <div class="product-info">
              <div class="product-name">{{ product.name }}</div>
            </div>
          </td>
          <td>
            <div class="product-image">
              <img [src]="product.image" [alt]="product.name">
            </div>
          </td>
          <td>
            <span class="price">${{ product.price }}</span>
          </td>
          <td>
            <span class="unit">{{ product.unit }}</span>
          </td>
          <td>
            <span class="stock">{{ product.quantity}}</span>
          </td>
          <td>
            <span class="status-badge" 
            [class.active]="product.isActive"
            [class.inactive]="!product.isActive"
            >
              {{ product.isActive ? 'active' : 'Inactive' }}
            </span>
          </td>
          <td>
            <div class="action-buttons">
                
              <!-- ACTIVATE -->
              <button class="action-btn"
                      *ngIf="!product.isActive"
                      (click)="toggleStatus(product)">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M2.458 12C3.732 7.943 7.523 5 12 5
                           c4.478 0 8.268 2.943 9.542 7
                           -1.274 4.057-5.064 7-9.542 7
                           -4.477 0-8.268-2.943-9.542-7z"/>
                </svg>
              </button>

              <!-- EDIT -->
              <button class="action-btn"
                      (click)="openEditForm(product)">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M11 5H6a2 2 0 00-2 2v11
                           a2 2 0 002 2h11a2 2 0 002-2v-5
                           m-1.414-9.414a2 2 0 112.828 2.828
                           L11.828 15H9v-2.828l8.586-8.586z"/>
                </svg>
              </button>

              <!-- DELETE -->
              <button class="action-btn delete"
                      (click)="deleteProduct(product.id!)">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M19 7l-.867 12.142A2 2 0 0116.138 21
                           H7.862a2 2 0 01-1.995-1.858L5 7
                           m5 4v6m4-6v6
                           m1-10V4a1 1 0 00-1-1h-4
                           a1 1 0 00-1 1v3M4 7h16"/>
                </svg>
              </button>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Pagination -->
  <div class="pagination">
    <div class="pagination-info">
      Showing 1 to 10 of 284 entries
    </div>
    <div class="pagination-controls">
      <button class="page-btn" disabled>
        <svg viewBox="0 0 20 20" fill="currentColor">
          <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"/>
        </svg>
      </button>
      <button class="page-btn active">1</button>
      <button class="page-btn">2</button>
      <button class="page-btn">3</button>
      <button class="page-btn">4</button>
      <button class="page-btn">5</button>
      <button class="page-btn">
        <svg viewBox="0 0 20 20" fill="currentColor">
          <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"/>
        </svg>
      </button>
    </div>
  </div>
</div>

<!-- Add/Edit Product Modal -->
<div class="modal" *ngIf="showProductForm">
  <div class="modal-backdrop" ></div>
  <div class="modal-content">
    <div class="modal-header">
      <h2 class="modal-title">{{ isEditMode ? 'Edit Product' : 'Add Product'}}</h2>
      <button class="close-btn" (click)="closeForm()">âœ•</button>
    </div>

    <div class="modal-body">
      <form class="product-form" #f="ngForm" (ngSubmit)="submit(f)">
        <div class="form-group">
          <label for="productName">Product Name</label>
          <input 
            id="productName"
            type="text" 
            [(ngModel)]="productForm.name"
            placeholder="Enter product name" 
            required minlength="2"
            name="name"
          >
        </div>

        <div class="form-group">
          <label for="productImage">Product Image URL</label>
          <input 
            id="productImage"
            type="text" 
            [(ngModel)] = "productForm.image"
            placeholder="Enter image URL" 
            name="image"
          >
        </div>

         <div class="form-group">
          <label for="productQuantity">Quantity</label>
          <input 
            id="productQuantity"
            type="number" 
            required min="1"
            [(ngModel)] = "productForm.quantity"
            placeholder="Enter product Quantity" 
            name="quantity"
          >
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="productPrice">Price</label>
            <div class="input-with-prefix">
              <span class="input-prefix">$</span>
              <input 
                id="productPrice"
                type="number" 
                placeholder="0.00" 
                [(ngModel)] = "productForm.price"
                required min="0.1"
                name="price"
              >
            </div>
          </div>

          <div class="form-group">
            <label for="productUnit">Unit</label>
            <select id="productUnit"  name="unit" [(ngModel)] = "productForm.unit" required>
              <option value="">Select unit</option>
              <option value="piece">Piece</option>
              <option value="box">Box</option>
              <option value="kg">Kilogram</option>
              <option value="liter">Liter</option>
              <option value="meter">Meter</option>
            </select>
          </div>
        </div>

      </form>
    </div>
    <div class="modal-footer">
      <button class="btn btn-secondary" (click)="closeForm()">Cancel</button>
      <button class="btn btn-primary" [disabled]="f.invalid">
        {{ isEditMode ? 'Update Product' : 'Add Product' }}
      </button>
    </div>
  </div>
</div>